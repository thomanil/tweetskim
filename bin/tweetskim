#!/usr/bin/env ruby

require "tweetskim"
require "optparse"


OptionParser.new do |o|
  o.on('-a') { |b| $show_all = b }
  o.on('-c') { |b| $count_new = b }
  o.on('-e') { |b| $mentions = b }
  o.on('-i') { |b| $inverse_order = b }
  o.on('-l') { |b| $line_formatted = b }
  o.on('-m') { |b| $mark_all_read = b }
  o.on('-n N') { |n| $tweet_no = n }
  o.on('-t') { |b| $html_output = b }
  o.on('-v') { |b| $version = b }
  o.on('-f FILENAME') { |filename| $filename = filename }
  o.on('-h') { puts o; exit }
  o.parse!
end

puts "got here"


#p :quiet => $quiet, :interactive => $interactive, :filename => $filename


DEFAULT_MAX_TWEETS = 100
DEFAULT_COLUMN_WIDTH = 40

adapter = Tweetskim::TwitterAdapter.new
formatter = Tweetskim::Formatter.new

timeline = adapter.timeline(:count => DEFAULT_MAX_TWEETS)
mentions = adapter.mentions(:count => DEFAULT_MAX_TWEETS)

timeline_col = formatter.column timeline, {:width => DEFAULT_COLUMN_WIDTH}
mentions_col = formatter.column mentions, {:width => DEFAULT_COLUMN_WIDTH}

timeline_padded = formatter.pad timeline_col, DEFAULT_COLUMN_WIDTH
mentions_padded = formatter.pad mentions_col, DEFAULT_COLUMN_WIDTH

puts formatter.pasted_columns([timeline_padded, mentions_padded])
